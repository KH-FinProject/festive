-- 와글 게시판 관련 테이블 생성 SQL (Oracle)

-- 1. 게시판 타입 테이블
CREATE TABLE BOARD_TYPE (
    BOARD_TYPE_NO NUMBER PRIMARY KEY,
    BOARD_TYPE_NAME VARCHAR2(50) NOT NULL,
    BOARD_TYPE_DESC VARCHAR2(200)
);

-- 2. 게시글 테이블
CREATE TABLE BOARD (
    BOARD_NO NUMBER PRIMARY KEY,
    BOARD_TYPE_NO NUMBER NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    BOARD_TITLE VARCHAR2(200) NOT NULL,
    BOARD_CONTENT CLOB NOT NULL,
    BOARD_VIEW_COUNT NUMBER DEFAULT 0 NOT NULL,
    BOARD_LIKE_COUNT NUMBER DEFAULT 0 NOT NULL,
    BOARD_COMMENT_COUNT NUMBER DEFAULT 0 NOT NULL,
    BOARD_CREATE_DATE DATE NOT NULL,
    BOARD_UPDATE_DATE DATE,
    BOARD_DELETE_YN CHAR(1) DEFAULT 'N' NOT NULL,
    CONSTRAINT FK_BOARD_TYPE FOREIGN KEY (BOARD_TYPE_NO) REFERENCES BOARD_TYPE(BOARD_TYPE_NO),
    CONSTRAINT FK_BOARD_MEMBER FOREIGN KEY (MEMBER_NO) REFERENCES MEMBER(MEMBER_NO)
);

-- 3. 게시글 좋아요 테이블
CREATE TABLE BOARD_LIKE (
    LIKE_NO NUMBER PRIMARY KEY,
    BOARD_NO NUMBER NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    LIKE_CREATE_DATE DATE NOT NULL,
    CONSTRAINT FK_LIKE_BOARD FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO),
    CONSTRAINT FK_LIKE_MEMBER FOREIGN KEY (MEMBER_NO) REFERENCES MEMBER(MEMBER_NO),
    CONSTRAINT UQ_BOARD_LIKE UNIQUE (BOARD_NO, MEMBER_NO)
);

-- 4. 댓글 테이블
CREATE TABLE COMMENT (
    COMMENT_NO NUMBER PRIMARY KEY,
    BOARD_NO NUMBER NOT NULL,
    MEMBER_NO NUMBER NOT NULL,
    COMMENT_CONTENT VARCHAR2(1000) NOT NULL,
    COMMENT_PARENT_NO NUMBER,
    COMMENT_CREATE_DATE DATE NOT NULL,
    COMMENT_UPDATE_DATE DATE,
    COMMENT_DELETE_YN CHAR(1) DEFAULT 'N' NOT NULL,
    CONSTRAINT FK_COMMENT_BOARD FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO),
    CONSTRAINT FK_COMMENT_MEMBER FOREIGN KEY (MEMBER_NO) REFERENCES MEMBER(MEMBER_NO),
    CONSTRAINT FK_COMMENT_PARENT FOREIGN KEY (COMMENT_PARENT_NO) REFERENCES COMMENT(COMMENT_NO)
);

-- 5. 게시글 이미지 테이블
CREATE TABLE BOARD_IMG (
    BOARD_IMG_NO NUMBER PRIMARY KEY,
    BOARD_NO NUMBER NOT NULL,
    BOARD_IMG_ORIGINAL VARCHAR2(200) NOT NULL,
    BOARD_IMG_RENAME VARCHAR2(200) NOT NULL,
    BOARD_IMG_PATH VARCHAR2(500) NOT NULL,
    BOARD_IMG_LEVEL NUMBER NOT NULL,
    CONSTRAINT FK_BOARD_IMG FOREIGN KEY (BOARD_NO) REFERENCES BOARD(BOARD_NO)
);

-- 시퀀스 생성
CREATE SEQUENCE SEQ_BOARD_TYPE_NO START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_BOARD_NO START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_BOARD_LIKE_NO START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_COMMENT_NO START WITH 1 INCREMENT BY 1;
CREATE SEQUENCE SEQ_BOARD_IMG_NO START WITH 1 INCREMENT BY 1;

-- 인덱스 생성
CREATE INDEX IDX_BOARD_TYPE_NO ON BOARD(BOARD_TYPE_NO);
CREATE INDEX IDX_BOARD_MEMBER_NO ON BOARD(MEMBER_NO);
CREATE INDEX IDX_BOARD_CREATE_DATE ON BOARD(BOARD_CREATE_DATE);
CREATE INDEX IDX_COMMENT_BOARD_NO ON COMMENT(BOARD_NO);
CREATE INDEX IDX_COMMENT_PARENT_NO ON COMMENT(COMMENT_PARENT_NO);

-- 초기 데이터 입력

-- 게시판 타입 초기 데이터
INSERT INTO BOARD_TYPE (BOARD_TYPE_NO, BOARD_TYPE_NAME, BOARD_TYPE_DESC) 
VALUES (SEQ_BOARD_TYPE_NO.NEXTVAL, '일반게시판', '자유롭게 축제 후기와 의견을 나누는 공간입니다.');

INSERT INTO BOARD_TYPE (BOARD_TYPE_NO, BOARD_TYPE_NAME, BOARD_TYPE_DESC) 
VALUES (SEQ_BOARD_TYPE_NO.NEXTVAL, '공지사항', '운영진의 공지사항을 확인하는 공간입니다.');

-- 샘플 게시글 데이터 (기존 프론트엔드 샘플 데이터 기반)
INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '서울 불꽃축제 다녀왔어요 완전 대박이었음 ㅠㅠ 사진도 엄청 많이 찍었는데 날씨도 좋고 너무 예뻤어요', '안녕하세요! 어제 서울 불꽃축제에 다녀왔는데 정말 최고였습니다! 날씨도 너무 좋았고, 사람들도 많았지만 그만큼 분위기가 정말 좋았어요. 특히 마지막 피날레 불꽃이 정말 장관이었습니다. 다음에도 꼭 가고 싶어요!', 96, 123, 4, SYSDATE - 1, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '부산 바다축제 후기에요! 예전엔 진짜루 누가 같이 갈 사람?', '부산 바다축제 정말 좋았어요! 바다를 배경으로 한 축제라 더욱 특별했습니다. 해산물도 맛있고 공연도 볼거리가 많았어요.', 78, 56, 2, SYSDATE - 1, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '전주 한옥마을 축제 프로그램 완전 추천!', '전주 한옥마을에서 열리는 전통문화축제 정말 좋았어요. 한복체험도 하고 전통음식도 맛볼 수 있어서 좋았습니다.', 45, 24, 1, SYSDATE - 2, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '논산 딸기축제 2년째 반박자씩 늦게 갑니다', '논산 딸기축제 올해도 다녀왔어요! 딸기가 정말 달고 맛있었습니다. 딸기따기 체험도 재미있었어요.', 13, 47, 0, SYSDATE - 2, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '청주 흥덕 축제 야경 사진 공유해요~ (사진 많음 주의)', '청주 흥덕구에서 열린 축제 야경이 정말 예뻤어요! 조명이 화려하고 분위기가 좋았습니다.', 156, 80, 3, SYSDATE - 3, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '해운대 모래축제 현실 리뷰 꿀팁 전해드려요!', '해운대 모래축제에 다녀온 후기입니다. 모래조각 작품들이 정말 대단했어요! 꿀팁도 공유해드릴게요.', 34, 56, 2, SYSDATE - 3, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '대구 치맥페스티벌 일정 정리했습니다', '대구 치맥페스티벌 정보를 정리해서 공유드려요! 치킨과 맥주의 조합이 최고였습니다.', 24, 12, 1, SYSDATE - 4, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 1, 1, '춘천 마임축제 후기!', '춘천에서 열린 마임축제 정말 재미있었어요! 무언극 공연들이 정말 수준 높았습니다.', 44, 33, 0, SYSDATE - 5, 'N');

-- 공지사항 샘플 데이터
INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 2, 1, '와글와글 게시판 이용 안내 및 규칙', '안녕하세요. 와글와글 게시판을 이용해 주셔서 감사합니다. 

다음은 게시판 이용 규칙입니다:

1. 서로를 존중하는 언어를 사용해 주세요.
2. 축제 관련 내용을 공유해 주세요.
3. 개인정보 노출을 금지합니다.
4. 상업적 광고는 제한됩니다.
5. 불건전한 내용은 삭제될 수 있습니다.

건전하고 즐거운 게시판 문화를 함께 만들어 가요!', 150, 0, 0, SYSDATE, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 2, 1, '와글와글 게시판 업데이트 안내', '와글와글 게시판이 새롭게 업데이트 되었습니다!

주요 업데이트 내용:
- 게시글 검색 기능 추가
- 댓글 기능 개선
- 사용자 경험 향상

앞으로도 더 나은 서비스를 위해 노력하겠습니다.', 98, 0, 0, SYSDATE - 1, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 2, 1, '와글와글 게시판 이벤트 안내', '2024년 연말 축제 후기 이벤트를 진행합니다!

이벤트 기간: 12월 1일 ~ 12월 31일
참여 방법: 축제 후기 게시글 작성
시상 내역: 우수 후기 작성자 5분께 상품권 증정

많은 참여 부탁드립니다!', 76, 0, 0, SYSDATE - 2, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 2, 1, '와글와글 게시판 베타 테스트 안내', '와글와글 게시판 베타 테스트에 참여해 주신 모든 분들께 감사드립니다.

테스트 기간 중 발견된 이슈들이 수정되었으며, 정식 서비스를 시작합니다.

지속적인 관심과 참여 부탁드립니다.', 55, 0, 0, SYSDATE - 3, 'N');

INSERT INTO BOARD (BOARD_NO, BOARD_TYPE_NO, MEMBER_NO, BOARD_TITLE, BOARD_CONTENT, BOARD_VIEW_COUNT, BOARD_LIKE_COUNT, BOARD_COMMENT_COUNT, BOARD_CREATE_DATE, BOARD_DELETE_YN)
VALUES (SEQ_BOARD_NO.NEXTVAL, 2, 1, '서비스 점검 안내', '시스템 점검 안내

점검 일시: 2024년 12월 15일 02:00 ~ 04:00
점검 내용: 서버 성능 개선 및 보안 업데이트

점검 시간 중에는 서비스 이용이 제한됩니다.
이용에 불편을 드려 죄송합니다.', 32, 0, 0, SYSDATE - 4, 'N');

-- 샘플 댓글 데이터
INSERT INTO COMMENT (COMMENT_NO, BOARD_NO, MEMBER_NO, COMMENT_CONTENT, COMMENT_PARENT_NO, COMMENT_CREATE_DATE, COMMENT_DELETE_YN)
VALUES (SEQ_COMMENT_NO.NEXTVAL, 1, 1, '와 정말 예쁘네요! 저도 내일 가려고 했는데 더 기대돼요', NULL, SYSDATE, 'N');

INSERT INTO COMMENT (COMMENT_NO, BOARD_NO, MEMBER_NO, COMMENT_CONTENT, COMMENT_PARENT_NO, COMMENT_CREATE_DATE, COMMENT_DELETE_YN)
VALUES (SEQ_COMMENT_NO.NEXTVAL, 1, 1, '네! 꼭 가보세요~ 지금이 딱 절정이에요', 1, SYSDATE, 'N');

INSERT INTO COMMENT (COMMENT_NO, BOARD_NO, MEMBER_NO, COMMENT_CONTENT, COMMENT_PARENT_NO, COMMENT_CREATE_DATE, COMMENT_DELETE_YN)
VALUES (SEQ_COMMENT_NO.NEXTVAL, 1, 1, '사진 정말 잘 찍으셨네요! 어떤 카메라 쓰셨어요?', NULL, SYSDATE, 'N');

INSERT INTO COMMENT (COMMENT_NO, BOARD_NO, MEMBER_NO, COMMENT_CONTENT, COMMENT_PARENT_NO, COMMENT_CREATE_DATE, COMMENT_DELETE_YN)
VALUES (SEQ_COMMENT_NO.NEXTVAL, 1, 1, '저도 어제 갔었는데 정말 예뻤어요! 다만 사람이 너무 많아서 좀 힘들었지만... 그래도 갈 만해요!', NULL, SYSDATE, 'N');

COMMIT; 